
  <!DOCTYPE html>
  <html>
    <head>
      <title>quellHelpers.js</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">quell-server/src/helpers/quellHelpers.js</td><td class="">84.24%</td><td class="">80%</td><td class="">977</td><td class="">823</td><td class="">154</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">&quot;use strict&quot;;
var __assign = (this &amp;&amp; this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i &lt; n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArray = (this &amp;&amp; this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i &lt; l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
exports.__esModule = true;
exports.getFieldsMap = exports.getQueryMap = exports.getMutationMap = exports.updateProtoWithFragment = exports.parseAST = exports.joinResponses = exports.createQueryObj = exports.createQueryStr = void 0;
var visitor_1 = require(&quot;graphql/language/visitor&quot;);
/**
 * Traverses over a supplied query Object and uses the fields on there to create a query string reflecting the data.
 * This query string is a modified version of the query string received by Quell that has references to data found within the cache removed
 * so that the final query is faster and reduced in scope.
 * @param {Object} queryObject - A modified version of the prototype with only values we want to pass onto the queryString.
 * @param {string} operationType - A string indicating the GraphQL operation type- &#x27;query&#x27;, &#x27;mutation&#x27;, etc.
 */
function createQueryStr(queryObject, operationType) {
    if (Object.keys(queryObject).length === 0)
        return &#x27;&#x27;;
    var openCurly = &#x27;{&#x27;;
    var closeCurly = &#x27;}&#x27;;
    var openParen = &#x27;(&#x27;;
    var closeParen = &#x27;)&#x27;;
    var mainStr = &#x27;&#x27;;
    // iterate over every key in queryObject
    // place key into query object
    for (var key in queryObject) {
        mainStr += &quot; &quot;.concat(key).concat(getAliasType(queryObject[key])).concat(getArgs(queryObject[key]), &quot; &quot;).concat(openCurly, &quot; &quot;).concat(stringify(queryObject[key])).concat(closeCurly);
    }
    /**
     * Helper function that is used to recursively build a GraphQL query string from a nested object,
     * ignoring any __values (ie __alias and __args).
     * @param {QueryFields} fields - An object whose properties need to be converted to a string to be used for a GraphQL query.
     * @returns {string} innerStr - A graphQL query string.
     */
    function stringify(fields) {
        // initialize inner string
        var innerStr = &#x27;&#x27;;
        // iterate over KEYS in OBJECT
        for (var key in fields) {
            // is fields[key] string? concat with inner string &amp; empty space
            if (typeof fields[key] === &#x27;boolean&#x27;) {
                innerStr += key + &#x27; &#x27;;
            }
            // is key object? &amp;&amp; !key.includes(&#x27;__&#x27;), recurse stringify
            if (typeof fields[key] === &#x27;object&#x27; &amp;&amp; !key.includes(&#x27;__&#x27;)) {
                var fieldsObj = fields[key];
                // TODO try to fix this error
                var type = getAliasType(fieldsObj);
                var args = getArgs(fieldsObj);
                innerStr += &quot;&quot;.concat(key).concat(type).concat(args, &quot; &quot;).concat(openCurly, &quot; &quot;).concat(stringify(fieldsObj)).concat(closeCurly, &quot; &quot;);
            }
        }
        return innerStr;
    }
    /**
     * Helper function that iterates through arguments object for current field and creates
     * an argument string to attach to the query string.
     * @param {QueryFields} fields - Object whose arguments will be attached to the query string.
     * @returns {string} Argument string to be attached to the query string.
     */
    function getArgs(fields) {
        var argString = &#x27;&#x27;;
        if (!fields.__args)
            return &#x27;&#x27;;
        Object.keys(fields.__args).forEach(function (key) {
            argString
                ? (argString += &quot;, &quot;.concat(key, &quot;: \&quot;&quot;).concat(fields.__args[key], &quot;\&quot;&quot;))
                : (argString += &quot;&quot;.concat(key, &quot;: \&quot;&quot;).concat(fields.__args[key], &quot;\&quot;&quot;));
        });
        // return arg string in parentheses, or if no arguments, return an empty string
        return argString ? &quot;&quot;.concat(openParen).concat(argString).concat(closeParen) : &#x27;&#x27;;
    }
    /**
     * Helper function that formats the field&#x27;s alias, if it exists, for the query string.
     * @param {QueryFields} fields - Object whose alias will be attached to the query string.
     * @returns {string} Alias string to be attached to the query string.
     */
    function getAliasType(fields) {
        return fields.__alias ? &quot;: &quot;.concat(fields.__type) : &#x27;&#x27;;
    }
    // Create the final query string.
    var queryStr = openCurly + mainStr + &#x27; &#x27; + closeCurly;
    return operationType ? operationType + &#x27; &#x27; + queryStr : queryStr;
}
exports.createQueryStr = createQueryStr;
/**
 * Takes in a map of fields and true/false values (the prototype) and creates a query object containing any values missing from the cache.
 * The resulting queryObj is then used as a template to create GraphQL query strings.
 * @param {ProtoObjType} map - Map of fields and true/false values from initial request, should be the prototype.
 * @returns {Object} queryObject that includes only the values to be requested from GraphQL endpoint.
 */
function createQueryObj(map) {
    var output = {};
    // iterate over every key in map
    // true values are filtered out, false values are placed on output
    for (var key in map) {
        var reduced = reducer(map[key]);
        if (Object.keys(reduced).length &gt; 0) {
            output[key] = reduced;
        }
    }
    /**
     * Takes in a fields object and returns only the values needed from the server.
     * @param {Object} fields - Object containing true or false values that determines what should be
     * retrieved from the server.
     * @returns {Object} Filtered object of only queries without a value or an empty object.
     */
    function reducer(fields) {
        // Create a filter object to store values needed from server.
        var filter = {};
        // Create a propsFilter object for properties such as args, aliases, etc.
        var propsFilter = {};
        for (var key in fields) {
            // If value is false, place directly on filter
            if (fields[key] === false) {
                filter[key] = false;
            }
            // Force the id onto the query object
            if (key === &#x27;id&#x27; || key === &#x27;_id&#x27; || key === &#x27;ID&#x27; || key === &#x27;Id&#x27;) {
                filter[key] = false;
            }
            // If value is an object, recurse to determine nested values
            if (typeof fields[key] === &#x27;object&#x27; &amp;&amp; !key.includes(&#x27;__&#x27;)) {
                var reduced = reducer(fields[key]);
                // if reduced object has any values to pass, place on filter
                if (Object.keys(reduced).length &gt; 1) {
                    filter[key] = reduced;
                }
            }
            // If reserved property such as args or alias, place on propsFilter
            if (key.includes(&#x27;__&#x27;)) {
                propsFilter[key] = fields[key];
            }
        }
        var numFields = Object.keys(fields).length;
        // If the filter has any values to pass, return filter &amp; propsFilter; otherwise return empty object
        return Object.keys(filter).length &gt; 1 &amp;&amp; numFields &gt; 5
            ? __assign(__assign({}, filter), propsFilter) : {};
    }
    return output;
}
exports.createQueryObj = createQueryObj;
/**
 * Combines two objects containing results from separate sources and outputs a single object with information from both sources combined,
 * formatted to be delivered to the client, using the queryProto as a template for how to structure the final response object.
 * @param {Object} cacheResponse - Response data from the cache.
 * @param {Object} serverResponse - Response data from the server or external API.
 * @param {Object} queryProto - Current slice of the prototype being used as a template for final response object structure.
 * @param {boolean} fromArray - Whether or not the current recursive loop came from within an array (should NOT be supplied to function call).
 */
function joinResponses(cacheResponse, serverResponse, queryProto, fromArray) {
    var _a, _b, _c, _d, _e, _f;
    if (fromArray === void 0) { fromArray = false; }
    var mergedResponse = {};
    // loop through fields object keys, the &quot;source of truth&quot; for structure
    // store combined responses in mergedResponse
    for (var key in queryProto) {
        // for each key, check whether data stored at that key is an array or an object
        var checkResponse = Object.prototype.hasOwnProperty.call(serverResponse, key)
            ? serverResponse
            : cacheResponse;
        if (Array.isArray(checkResponse[key])) {
            // merging logic depends on whether the data is on the cacheResponse, serverResponse, or both
            // if both of the caches contain the same keys...
            if (cacheResponse[key] &amp;&amp; serverResponse[key]) {
                // we first check to see if the responses have identical keys to both avoid
                // only returning 1/2 of the data (ex: there are 2 objects in the cache and
                // you query for 4 objects (which includes the 2 cached objects) only returning
                // the 2 new objects from the server)
                // if the keys are identical, we can return a &quot;simple&quot; merge of both
                var cacheKeys = Object.keys(cacheResponse[key][0]);
                var serverKeys = Object.keys(serverResponse[key][0]);
                var keysSame = true;
                for (var n = 0; n &lt; cacheKeys.length; n++) {
                    if (cacheKeys[n] !== serverKeys[n])
                        keysSame = false;
                }
                if (keysSame) {
                    mergedResponse[key] = __spreadArray(__spreadArray([], cacheResponse[key], true), serverResponse[key], true);
                }
                // otherwise, we need to combine the responses at the object level
                else {
                    var mergedArray = [];
                    for (var i = 0; i &lt; cacheResponse[key].length; i++) {
                        // for each index of array, combine cache and server response objects
                        var joinedResponse = joinResponses((_a = {}, _a[key] = cacheResponse[key][i], _a), (_b = {}, _b[key] = serverResponse[key][i], _b), (_c = {}, _c[key] = queryProto[key], _c), true);
                        mergedArray.push(joinedResponse);
                    }
                    mergedResponse[key] = mergedArray;
                }
            }
            else if (cacheResponse[key]) {
                mergedResponse[key] = cacheResponse[key];
            }
            else {
                mergedResponse[key] = serverResponse[key];
            }
        }
        else {
            if (!fromArray) {
                // if object doesn&#x27;t come from an array, we must assign on the object at the given key
                mergedResponse[key] = __assign(__assign({}, cacheResponse[key]), serverResponse[key]);
            }
            else {
                // if the object comes from an array, we do not want to assign to a key as per GQL spec
                mergedResponse = __assign(__assign({}, cacheResponse[key]), serverResponse[key]);
            }
            for (var fieldName in queryProto[key]) {
                // check for nested objects
                if (typeof queryProto[key][fieldName] === &#x27;object&#x27; &amp;&amp;
                    !fieldName.includes(&#x27;__&#x27;)) {
                    // recurse joinResponses on that object to create deeply nested copy on mergedResponse
                    var mergedRecursion = {};
                    if (cacheResponse[key] &amp;&amp; serverResponse[key]) {
                        if (cacheResponse[key][fieldName] &amp;&amp;
                            serverResponse[key][fieldName]) {
                            mergedRecursion = joinResponses((_d = {},
                                _d[fieldName] = cacheResponse[key][fieldName],
                                _d), (_e = {},
                                _e[fieldName] = serverResponse[key][fieldName],
                                _e), (_f = {}, _f[fieldName] = queryProto[key][fieldName], _f));
                        }
                        else if (cacheResponse[key][fieldName]) {
                            mergedRecursion[fieldName] = cacheResponse[key][fieldName];
                        }
                        else {
                            mergedRecursion[fieldName] = serverResponse[key][fieldName];
                        }
                    }
                    // place on merged response, spreading the mergedResponse[key] if it
                    // is an object or an array, or just adding it as a value at key otherwise
                    if (typeof mergedResponse[key] === &#x27;object&#x27; ||
                        Array.isArray(mergedResponse[key])) {
                        mergedResponse[key] = __assign(__assign({}, mergedResponse[key]), mergedRecursion);
                    }
                    else {
                        // case for when mergedResponse[key] is not an object or array and possibly
                        // boolean or a string
                        mergedResponse[key] = __assign({ key: mergedResponse[key] }, mergedRecursion);
                    }
                }
            }
        }
    }
    return mergedResponse;
}
exports.joinResponses = joinResponses;
/**
 * Traverses the abstract syntax tree depth-first to create a template for future operations, such as
 * request data from the cache, creating a modified query string for additional information needed, and joining cache and database responses.
 * @param {Object} AST - An abstract syntax tree generated by GraphQL library that we will traverse to build our prototype.
 * @param {Object} options - (not fully integrated) A field for user-supplied options.
 * @returns {Object} prototype object
 * @returns {string} operationType
 * @returns {Object} frags object
 */
function parseAST(AST, options) {
    if (options === void 0) { options = { userDefinedID: null }; }
    // Initialize prototype and frags as empty objects.
    // Information from the AST is distilled into the prototype for easy
    // access during caching, rebuilding query strings, etc.
    var proto = {};
    // The frags object will contain the fragments defined in the query in a format
    // similar to the proto.
    var frags = {};
    // Create operation type variable. This will be &#x27;query&#x27;, &#x27;mutation&#x27;, &#x27;subscription&#x27;, &#x27;noID&#x27;, or &#x27;unQuellable&#x27;.
    var operationType = &#x27;&#x27;;
    // Initialize a stack to keep track of depth first parsing path.
    var stack = [];
    // Create field arguments object, which will track the id, type, alias, and args for the fields.
    // The field arguments object will eventually be merged with the prototype object.
    var fieldArgs = {};
    // Extract the userDefinedID from the options object, if provided.
    var userDefinedID = options.userDefinedID;
    /**
     * visit is a utility provided in the graphql-JS library. It performs a
     * depth-first traversal of the abstract syntax tree, invoking a callback
     * when each SelectionSet node is entered. That function builds the prototype.
     * Invokes a callback when entering and leaving Field node to keep track of nodes with stack
     *
     * Find documentation at:
     * https://graphql.org/graphql-js/language/#visit
     */
    (0, visitor_1.visit)(AST, {
        // The enter function will be triggered upon entering each node in the traversal.
        enter: function (node) {
            var _a, _b, _c, _d;
            // Quell cannot cache directives, so we need to return as unQuellable if the node has directives.
            if ((_a = node) === null || _a === void 0 ? void 0 : _a.directives) {
                if ((_d = (_c = (_b = node) === null || _b === void 0 ? void 0 : _b.directives) === null || _c === void 0 ? void 0 : _c.length) !== null &amp;&amp; _d !== void 0 ? _d : 0 &gt; 0) {
                    operationType = &#x27;unQuellable&#x27;;
                    // Return BREAK to break out of the current traversal branch.
                    return visitor_1.BREAK;
                }
            }
        },
        // If the current node is of type OperationDefinition, this function will be triggered upon entering it.
        // It checks the type of operation being performed.
        OperationDefinition: function (node) {
            // Quell cannot cache subscriptions, so we need to return as unQuellable if the type is subscription.
            operationType = node.operation;
            if (operationType === &#x27;subscription&#x27;) {
                operationType = &#x27;unQuellable&#x27;;
                // Return BREAK to break out of the current traversal branch.
                return visitor_1.BREAK;
            }
        },
        // If the current node is of type FragmentDefinition, this function will be triggered upon entering it.
        FragmentDefinition: function (node) {
            // Get the name of the fragment.
            var fragName = node.name.value;
            // Add the fragment name to the stack.
            stack.push(fragName);
            // Add the fragment name as a key in the frags object, initialized to an empty object.
            frags[fragName] = {};
            // Loop through the selections in the selection set for the current FragmentDefinition node
            // in order to extract the fields in the fragment.
            for (var i = 0; i &lt; node.selectionSet.selections.length; i++) {
                // Below, we get the &#x27;name&#x27; property from the SelectionNode.
                // However, InlineFragmentNode (one of the possible types for SelectionNode) does
                // not have a &#x27;name&#x27; property, so we will want to skip nodes with that type.
                if (node.selectionSet.selections[i].kind !== &#x27;InlineFragment&#x27;) {
                    // Add base-level field names in the fragment to the frags object.
                    frags[fragName][node.selectionSet.selections[i].name.value] = true;
                }
            }
        },
        Field: {
            // If the current node is of type Field, this function will be triggered upon entering it.
            enter: function (node) {
                // Return introspection queries as unQuellable so that we do not cache them.
                // &quot;__keyname&quot; syntax is later used for Quell&#x27;s field-specific options, though this does not create collision with introspection.
                if (node.name.value.includes(&#x27;__&#x27;)) {
                    operationType = &#x27;unQuellable&#x27;;
                    // Return BREAK to break out of the current traversal branch.
                    return visitor_1.BREAK;
                }
                // Create an args object that will be populated with the current node&#x27;s arguments.
                var argsObj = {};
                // Auxiliary object for storing arguments, aliases, field-specific options, and more.
                // Query-wide options should be handled on Quell&#x27;s options object.
                var auxObj = {
                    __id: null
                };
                // Loop through the field&#x27;s arguments.
                if (node.arguments) {
                    node.arguments.forEach(function (arg) {
                        var key = arg.name.value;
                        // Quell cannot cache queries with variables, so we need to return unQuellable if the query has variables.
                        if (arg.value.kind === &#x27;Variable&#x27; &amp;&amp; operationType === &#x27;query&#x27;) {
                            operationType = &#x27;unQuellable&#x27;;
                            // Return BREAK to break out of the current traversal branch.
                            return visitor_1.BREAK;
                        }
                        /*
                         * In the next step, we get the value from the argument node&#x27;s value node.
                         * This assumes that the value node has a &#x27;value&#x27; property.
                         * If the &#x27;kind&#x27; of the value node is ObjectValue, ListValue, NullValue, or ListValue
                         * then the value node will not have a &#x27;value&#x27; property, so we must first check that
                         * the &#x27;kind&#x27; does not match any of those types.
                         */
                        if (arg.value.kind === &#x27;NullValue&#x27; ||
                            arg.value.kind === &#x27;ObjectValue&#x27; ||
                            arg.value.kind === &#x27;ListValue&#x27;) {
                            operationType = &#x27;unQuellable&#x27;;
                            // Return BREAK to break out of the current traversal branch.
                            return visitor_1.BREAK;
                        }
                        // Assign argument values to argsObj (key will be argument name, value will be argument value),
                        // skipping field-specific options (&#x27;__&#x27;) provided as arguments.
                        if (!key.includes(&#x27;__&#x27;)) {
                            // Get the value from the argument node&#x27;s value node.
                            argsObj[key] = arg.value.value;
                        }
                        // If a userDefinedID was included in the options object and the current argument name matches
                        // that ID, update the auxiliary object&#x27;s id.
                        if (userDefinedID ? key === userDefinedID : false) {
                            auxObj.__id = arg.value.value;
                        }
                        else if (
                        // If a userDefinedID was not provided, determine the uniqueID from the args.
                        // Note: do not use key.includes(&#x27;id&#x27;) to avoid assigning fields such as &quot;idea&quot; or &quot;idiom&quot; as uniqueID.
                        key === &#x27;id&#x27; ||
                            key === &#x27;_id&#x27; ||
                            key === &#x27;ID&#x27; ||
                            key === &#x27;Id&#x27;) {
                            // If the name of the argument is &#x27;id&#x27;, &#x27;_id&#x27;, &#x27;ID&#x27;, or &#x27;Id&#x27;,
                            // set the &#x27;__id&#x27; field on the auxObj equal to value of that argument.
                            auxObj.__id = arg.value.value;
                        }
                    });
                }
                // Gather other auxiliary data such as aliases, arguments, query type, and more to append to the prototype for future reference.
                // Set the fieldType (which will be the key in the fieldArgs object) equal to either the field&#x27;s alias or the field&#x27;s name.
                var fieldType = node.alias
                    ? node.alias.value
                    : node.name.value;
                // Set the &#x27;__type&#x27; property of the auxiliary object equal to the field&#x27;s name, converted to lower case.
                auxObj.__type = node.name.value.toLowerCase();
                // Set the &#x27;__alias&#x27; property of the auxiliary object equal to the field&#x27;s alias if it has one.
                auxObj.__alias = node.alias ? node.alias.value : null;
                // Set the &#x27;__args&#x27; property of the auxiliary object equal to the args
                auxObj.__args = Object.keys(argsObj).length &gt; 0 ? argsObj : null;
                // Add auxObj fields to prototype, allowing future access to type, alias, args, etc.
                fieldArgs[fieldType] = __assign({}, auxObj);
                // Add the field type to stacks to keep track of depth-first parsing path.
                stack.push(fieldType);
            },
            // If the current node is of type Field, this function will be triggered after visiting it and all of its children.
            leave: function () {
                // Pop stacks to keep track of depth-first parsing path.
                stack.pop();
            }
        },
        SelectionSet: {
            // If the current node is of type SelectionSet, this function will be triggered upon entering it.
            // The selection sets contain all of the sub-fields.
            // Iterate through the sub-fields to construct fieldsObject
            enter: function (node, key, parent, 
            // eslint-disable-next-line @typescript-eslint/no-unused-vars
            path, 
            // eslint-disable-next-line @typescript-eslint/no-unused-vars
            ancestors) {
                /*
                 * Exclude SelectionSet nodes whose parents are not of the kind
                 * &#x27;Field&#x27; to exclude nodes that do not contain information about
                 *  queried fields.
                 */
                // FIXME: It is possible for the parent to be an array. This happens when the selection set
                // is a fragment spread. In that case, the parent will not have a &#x27;kind&#x27; property. For now,
                // add a check that parent is not an array.
                if (parent &amp;&amp; // parent is not undefined
                    !Array.isArray(parent) &amp;&amp; // parent is not readonly ASTNode[]
                    parent.kind === &#x27;Field&#x27; // can now safely cast parent to ASTNode
                ) {
                    // Create fieldsValues object that will be used to collect fields as
                    // we loop through the selections.
                    var fieldsValues = {};
                    /*
                     * Create a variable called fragment, initialized to false, to indicate whether the selection set includes a fragment spread.
                     * Loop through the current selection set&#x27;s selections array.
                     * If the array contains a FragmentSpread node, set the fragment variable to true.
                     * This is reset to false upon entering each new selection set.
                     */
                    var fragment = false;
                    for (var _i = 0, _a = node.selections; _i &lt; _a.length; _i++) {
                        var field = _a[_i];
                        if (field.kind === &#x27;FragmentSpread&#x27;)
                            fragment = true;
                        /*
                         * If the current selection in the selections array is not a nested object
                         * (i.e. does not have a SelectionSet), set its value in fieldsValues to true.
                         * Below, we get the &#x27;name&#x27; property from the SelectionNode.
                         * However, InlineFragmentNode (one of the possible types for SelectionNode) does
                         * not have a &#x27;name&#x27; property, so we will want to skip nodes with that type.
                         * Furthermore, FragmentSpreadNodes never have a selection set property.
                         */
                        if (field.kind !== &#x27;InlineFragment&#x27; &amp;&amp;
                            (field.kind === &#x27;FragmentSpread&#x27; || !field.selectionSet))
                            fieldsValues[field.name.value] = true;
                    }
                    // If ID was not included on the request and the current node is not a fragment, then the query
                    // will not be included in the cache, but the request will be processed.
                    if (!Object.prototype.hasOwnProperty.call(fieldsValues, &#x27;id&#x27;) &amp;&amp;
                        !Object.prototype.hasOwnProperty.call(fieldsValues, &#x27;_id&#x27;) &amp;&amp;
                        !Object.prototype.hasOwnProperty.call(fieldsValues, &#x27;ID&#x27;) &amp;&amp;
                        !Object.prototype.hasOwnProperty.call(fieldsValues, &#x27;Id&#x27;) &amp;&amp;
                        !fragment) {
                        operationType = &#x27;noID&#x27;;
                        // Return BREAK to break out of the current traversal branch.
                        return visitor_1.BREAK;
                    }
                    // Place current fieldArgs object onto fieldsObject so it gets passed along to prototype.
                    // The fieldArgs contains arguments, aliases, etc.
                    var fieldsObject_1 = __assign(__assign({}, fieldsValues), fieldArgs[stack[stack.length - 1]]);
                    // Loop through stack to get correct path in proto for temp object
                    stack.reduce(function (prev, curr, index) {
                        // if last item in path, set value
                        if (index + 1 === stack.length)
                            prev[curr] = __assign({}, fieldsObject_1);
                        return prev[curr];
                    }, proto);
                }
            },
            // If the current node is of type SelectionSet, this function will be triggered upon entering it.
            leave: function () {
                // Pop stacks to keep track of depth-first parsing path
                stack.pop();
            }
        }
    });
    return { proto: proto, operationType: operationType, frags: frags };
}
exports.parseAST = parseAST;
/**
 * Takes collected fragments and integrates them onto the prototype where referenced.
 * @param {Object} protoObj - Prototype before it has been updated with fragments.
 * @param {Object} frags - Fragments object to update prototype with.
 * @returns {Object} Updated prototype object.
 */
function updateProtoWithFragment(protoObj, frags) {
    // If the proto or frags objects are null/undefined, return the protoObj.
    if (!protoObj || !frags)
        return protoObj;
    // Loop through the fields in the proto object.
    for (var key in protoObj) {
        // If the field is a nested object and not an introspection field (fields starting with &#x27;__&#x27;
        // that provide information about the underlying schema)
        if (typeof protoObj[key] === &#x27;object&#x27; &amp;&amp; !key.includes(&#x27;__&#x27;)) {
            // Update the field to the result of recursively calling updateProtoWithFragment,
            // passing the field and fragments.
            protoObj[key] = updateProtoWithFragment(protoObj[key], frags);
        }
        // If the field is a reference to a fragment, replace the reference to the fragment with
        // the actual fragment.
        if (Object.prototype.hasOwnProperty.call(frags, key)) {
            protoObj = __assign(__assign({}, protoObj), frags[key]);
            delete protoObj[key];
        }
    }
    // Return the updated proto
    return protoObj;
}
exports.updateProtoWithFragment = updateProtoWithFragment;
/**
 *  Generates a map of mutation to GraphQL object types. This mapping is used
 *  to identify references to cached data when mutation occurs.
 *  @param {Object} schema - GraphQL defined schema that is used to facilitate caching by providing valid queries,
 *  mutations, and fields.
 *  @returns {Object} mutationMap - Map of mutations to GraphQL types.
 */
function getMutationMap(schema) {
    var _a;
    var mutationMap = {};
    // get object containing all root mutations defined in the schema
    var mutationTypeFields = (_a = schema === null || schema === void 0 ? void 0 : schema.getMutationType()) === null || _a === void 0 ? void 0 : _a.getFields();
    // if queryTypeFields is a function, invoke it to get object with queries
    var mutationsObj = typeof mutationTypeFields === &#x27;function&#x27;
        ? mutationTypeFields()
        : mutationTypeFields;
    for (var mutation in mutationsObj) {
        // get name of GraphQL type returned by query
        // if ofType --&gt; this is collection, else not collection
        var returnedType = void 0;
        if (mutationsObj[mutation].type.ofType) {
            returnedType = [];
            returnedType.push(mutationsObj[mutation].type.ofType.name);
        }
        if (mutationsObj[mutation].type.name) {
            returnedType = mutationsObj[mutation].type.name;
        }
        mutationMap[mutation] = returnedType;
    }
    return mutationMap;
}
exports.getMutationMap = getMutationMap;
/**
 *  Generates a map of queries to GraphQL object types. This mapping is used
 *  to identify and create references to cached data.
 *  @param {Object} schema - GraphQL defined schema that is used to facilitate caching by providing valid queries,
 *  mutations, and fields.
 *  @returns {Object} queryMap - Map of queries to GraphQL types.
 */
function getQueryMap(schema) {
    var _a;
    var queryMap = {};
    // get object containing all root queries defined in the schema
    var queryTypeFields = (_a = schema === null || schema === void 0 ? void 0 : schema.getQueryType()) === null || _a === void 0 ? void 0 : _a.getFields();
    // if queryTypeFields is a function, invoke it to get object with queries
    var queriesObj = typeof queryTypeFields === &#x27;function&#x27; ? queryTypeFields() : queryTypeFields;
    for (var query in queriesObj) {
        // get name of GraphQL type returned by query
        // if ofType --&gt; this is collection, else not collection
        var returnedType = void 0;
        if (queriesObj[query].type.ofType) {
            returnedType = [];
            returnedType.push(queriesObj[query].type.ofType.name);
        }
        if (queriesObj[query].type.name) {
            returnedType = queriesObj[query].type.name;
        }
        queryMap[query] = returnedType;
    }
    return queryMap;
}
exports.getQueryMap = getQueryMap;
/**
 *  Generates of map of fields to GraphQL types. This mapping is used to identify
 *  and create references to cached data.
 *  @param {Object} schema - GraphQL defined schema that is used to facilitate caching by providing valid queries,
 *  mutations, and fields.
 *  @returns {Object} fieldsMap - Map of fields to GraphQL types.
 */
function getFieldsMap(schema) {
    var fieldsMap = {};
    var typesList = schema === null || schema === void 0 ? void 0 : schema.getTypeMap();
    var builtInTypes = [
        &#x27;String&#x27;,
        &#x27;Int&#x27;,
        &#x27;Float&#x27;,
        &#x27;Boolean&#x27;,
        &#x27;ID&#x27;,
        &#x27;Query&#x27;,
        &#x27;__Type&#x27;,
        &#x27;__Field&#x27;,
        &#x27;__EnumValue&#x27;,
        &#x27;__DirectiveLocation&#x27;,
        &#x27;__Schema&#x27;,
        &#x27;__TypeKind&#x27;,
        &#x27;__InputValue&#x27;,
        &#x27;__Directive&#x27;
    ];
    // exclude built-in types
    var customTypes = Object.keys(typesList).filter(function (type) { var _a; return !builtInTypes.includes(type) &amp;&amp; type !== ((_a = schema.getQueryType()) === null || _a === void 0 ? void 0 : _a.name); });
    // loop through types
    for (var _i = 0, customTypes_1 = customTypes; _i &lt; customTypes_1.length; _i++) {
        var type = customTypes_1[_i];
        var fieldsObj = {};
        var fields = typesList[type]._fields;
        if (typeof fields === &#x27;function&#x27;)
            fields = fields();
        for (var field in fields) {
            var key = fields[field].name;
            var value = fields[field].type.ofType
                ? fields[field].type.ofType.name
                : fields[field].type.name;
            fieldsObj[key] = value;
        }
        // place assembled types on fieldsMap
        fieldsMap[type] = fieldsObj;
    }
    return fieldsMap;
}
exports.getFieldsMap = getFieldsMap;
// // TODO: Unused functions for QuellCache Class
// /**
//  * createRedisKey creates key based on field name and argument id and returns string or null if key creation is not possible
//  * @param {Object} mutationMap -
//  * @param {Object} proto -
//  * @param {Object} protoArgs -
//  * @returns {Object} redisKey if possible, e.g. &#x27;Book-1&#x27; or &#x27;Book-2&#x27;, where &#x27;Book&#x27; is name from mutationMap and &#x27;1&#x27; is id from protoArgs
//  * and isExist if we have this key in redis
//  *
//  */
// // BUG: createRedisKey is an unused function -- types should be assigned if function is used
// async function createRedisKey(mutationMap, proto, protoArgs) {
//   let isExist = false;
//   let redisKey;
//   let redisValue = null;
//   for (const mutationName in proto) {
//     const mutationArgs = protoArgs[mutationName];
//     redisKey = mutationMap[mutationName];
//     for (const key in mutationArgs) {
//       let identifier = null;
//       if (key === &#x27;id&#x27; || key === &#x27;_id&#x27;) {
//         identifier = mutationArgs[key];
//         redisKey = mutationMap[mutationName] + &#x27;-&#x27; + identifier;
//         isExist = await this.checkFromRedis(redisKey);
//         if (isExist) {
//           redisValue = await this.getFromRedis(redisKey);
//           redisValue = JSON.parse(redisValue);
//           // combine redis value and protoArgs
//           let argumentsValue;
//           for (const mutationName in protoArgs) {
//             // change later, now we assume that we have only one mutation
//             argumentsValue = protoArgs[mutationName];
//           }
//           // updateObject is not defined anywhere
//           redisValue = this.updateObject(redisValue, argumentsValue);
//         }
//       }
//     }
//   }
//   return { redisKey, isExist, redisValue };
// }
// // BUG: getIdMap is an unused function -- types should be assigned if function is used
// function getIdMap() {
//   const idMap = {};
//   for (const type in this.fieldsMap) {
//     const userDefinedIds = [];
//     const fieldsAtType = this.fieldsMap[type];
//     for (const key in fieldsAtType) {
//       if (fieldsAtType[key] === &#x27;ID&#x27;) userDefinedIds.push(key);
//     }
//     idMap[type] = userDefinedIds;
//   }
//   return idMap;
// }
// /**
//  * Toggles to false all values in a nested field not present in cache so that they will
//  * be included in the reformulated query.
//  * @param {Object} proto - The prototype or a nested field within the prototype
//  * @returns {Object} proto - updated proto with false values for fields not present in cache
//  */
// // BUG: toggleProto is an unused function -- types should be assigned if function is used
// function toggleProto(proto) {
//   if (proto === undefined) return proto;
//   for (const key in proto) {
//     if (Object.keys(proto[key]).length &gt; 0) this.toggleProto(proto[key]);
//     else proto[key] = false;
//   }
//   return proto;
// }
// /**
//  * checkFromRedis reads from Redis cache and returns a promise.
//  * @param {String} key - the key for Redis lookup
//  * @returns {Promise} A promise that represents if the key was found in the redisCache
//  */
// // BUG: checkFromRedis is an unused function -- types should be assigned if function is used
// async function checkFromRedis(key: string): Promise&lt;number&gt; {
//   try {
//     // will return 0 if key does not exists
//     const existsInRedis: number = await this.redisCache.exists(key);
//     return existsInRedis;
//   } catch (err) {
//     console.log(&#x27;err in checkFromRedis: &#x27;, err);
//     return 0;
//   }
// }
// /**
//  * execRedisRunQueue executes all previously queued transactions in Redis cache
//  * @param {String} redisRunQueue - Redis queue of transactions awaiting execution
//  */
// // BUG: execRedisRunQueue is an unused function -- types should be assigned if function is used
// async function execRedisRunQueue(
//   redisRunQueue: ReturnType&lt;typeof this.redisCache.multi&gt;
// ): Promise&lt;void&gt; {
//   try {
//     await redisRunQueue.exec();
//   } catch (err) {
//     console.log(&#x27;err in execRedisRunQueue: &#x27;, err);
//   }
// }
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:1,&quot;character&quot;:4,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:2,&quot;character&quot;:4,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:2,&quot;character&quot;:41,&quot;text&quot;:&quot;t&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:3,&quot;character&quot;:17,&quot;text&quot;:&quot;s&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:4,&quot;character&quot;:12,&quot;text&quot;:&quot;s&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:5,&quot;character&quot;:26,&quot;text&quot;:&quot;s&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:5,&quot;character&quot;:70,&quot;text&quot;:&quot;s&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:6,&quot;character&quot;:16,&quot;text&quot;:&quot;t&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:6,&quot;character&quot;:23,&quot;text&quot;:&quot;s&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:8,&quot;character&quot;:15,&quot;text&quot;:&quot;t&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:10,&quot;character&quot;:11,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:10,&quot;character&quot;:20,&quot;text&quot;:&quot;apply&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:10,&quot;character&quot;:26,&quot;text&quot;:&quot;this&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:12,&quot;character&quot;:4,&quot;text&quot;:&quot;__spreadArray&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:12,&quot;character&quot;:62,&quot;text&quot;:&quot;to&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:12,&quot;character&quot;:66,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:12,&quot;character&quot;:72,&quot;text&quot;:&quot;pack&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:8,&quot;text&quot;:&quot;pack&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:56,&quot;text&quot;:&quot;l&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:60,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:65,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:73,&quot;text&quot;:&quot;ar&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:13,&quot;character&quot;:81,&quot;text&quot;:&quot;l&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:14,&quot;character&quot;:25,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:15,&quot;character&quot;:21,&quot;text&quot;:&quot;ar&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:15,&quot;character&quot;:53,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:16,&quot;character&quot;:20,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:19,&quot;character&quot;:11,&quot;text&quot;:&quot;to&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:19,&quot;character&quot;:14,&quot;text&quot;:&quot;concat&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:19,&quot;character&quot;:54,&quot;text&quot;:&quot;from&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:153,&quot;character&quot;:14,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:153,&quot;character&quot;:23,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:8,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:12,&quot;text&quot;:&quot;_b&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:16,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:20,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:24,&quot;text&quot;:&quot;_e&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:167,&quot;character&quot;:28,&quot;text&quot;:&quot;_f&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:194,&quot;character&quot;:42,&quot;text&quot;:&quot;__spreadArray&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:194,&quot;character&quot;:56,&quot;text&quot;:&quot;__spreadArray&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:201,&quot;character&quot;:60,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:201,&quot;character&quot;:108,&quot;text&quot;:&quot;_b&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:201,&quot;character&quot;:157,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:217,&quot;character&quot;:38,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:217,&quot;character&quot;:47,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:221,&quot;character&quot;:33,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:221,&quot;character&quot;:42,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:232,&quot;character&quot;:61,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:234,&quot;character&quot;:38,&quot;text&quot;:&quot;_e&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:236,&quot;character&quot;:38,&quot;text&quot;:&quot;_f&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:249,&quot;character&quot;:46,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:249,&quot;character&quot;:55,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:254,&quot;character&quot;:46,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:302,&quot;character&quot;:16,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:302,&quot;character&quot;:20,&quot;text&quot;:&quot;_b&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:302,&quot;character&quot;:24,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:302,&quot;character&quot;:28,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:304,&quot;character&quot;:17,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:21,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:27,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:33,&quot;text&quot;:&quot;_b&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:108,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:133,&quot;text&quot;:&quot;_c&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:136,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:156,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:305,&quot;character&quot;:172,&quot;text&quot;:&quot;_d&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:392,&quot;character&quot;:52,&quot;text&quot;:&quot;userDefinedID&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:420,&quot;character&quot;:39,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:490,&quot;character&quot;:24,&quot;text&quot;:&quot;fieldsObject_1&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:490,&quot;character&quot;:41,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:490,&quot;character&quot;:50,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:492,&quot;character&quot;:43,&quot;text&quot;:&quot;prev&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:492,&quot;character&quot;:49,&quot;text&quot;:&quot;curr&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:495,&quot;character&quot;:28,&quot;text&quot;:&quot;prev&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:495,&quot;character&quot;:33,&quot;text&quot;:&quot;curr&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:495,&quot;character&quot;:41,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:495,&quot;character&quot;:54,&quot;text&quot;:&quot;fieldsObject_1&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:496,&quot;character&quot;:31,&quot;text&quot;:&quot;prev&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:496,&quot;character&quot;:36,&quot;text&quot;:&quot;curr&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:532,&quot;character&quot;:23,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:532,&quot;character&quot;:32,&quot;text&quot;:&quot;__assign&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:548,&quot;character&quot;:8,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:551,&quot;character&quot;:8,&quot;text&quot;:&quot;mutationTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:551,&quot;character&quot;:30,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:551,&quot;character&quot;:121,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:551,&quot;character&quot;:146,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:551,&quot;character&quot;:149,&quot;text&quot;:&quot;getFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:553,&quot;character&quot;:8,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:553,&quot;character&quot;:30,&quot;text&quot;:&quot;mutationTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:554,&quot;character&quot;:10,&quot;text&quot;:&quot;mutationTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:555,&quot;character&quot;:10,&quot;text&quot;:&quot;mutationTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:556,&quot;character&quot;:25,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:560,&quot;character&quot;:12,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:560,&quot;character&quot;:35,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:560,&quot;character&quot;:40,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:562,&quot;character&quot;:30,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:562,&quot;character&quot;:53,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:562,&quot;character&quot;:58,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:562,&quot;character&quot;:65,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:564,&quot;character&quot;:12,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:564,&quot;character&quot;:35,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:564,&quot;character&quot;:40,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:565,&quot;character&quot;:27,&quot;text&quot;:&quot;mutationsObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:565,&quot;character&quot;:50,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:565,&quot;character&quot;:55,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:580,&quot;character&quot;:8,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:583,&quot;character&quot;:8,&quot;text&quot;:&quot;queryTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:583,&quot;character&quot;:27,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:583,&quot;character&quot;:115,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:583,&quot;character&quot;:140,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:583,&quot;character&quot;:143,&quot;text&quot;:&quot;getFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:585,&quot;character&quot;:8,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:585,&quot;character&quot;:28,&quot;text&quot;:&quot;queryTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:585,&quot;character&quot;:61,&quot;text&quot;:&quot;queryTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:585,&quot;character&quot;:81,&quot;text&quot;:&quot;queryTypeFields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:586,&quot;character&quot;:22,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:590,&quot;character&quot;:12,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:590,&quot;character&quot;:30,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:590,&quot;character&quot;:35,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:592,&quot;character&quot;:30,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:592,&quot;character&quot;:48,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:592,&quot;character&quot;:53,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:592,&quot;character&quot;:60,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:594,&quot;character&quot;:12,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:594,&quot;character&quot;:30,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:594,&quot;character&quot;:35,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:595,&quot;character&quot;:27,&quot;text&quot;:&quot;queriesObj&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:595,&quot;character&quot;:45,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:595,&quot;character&quot;:50,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:611,&quot;character&quot;:8,&quot;text&quot;:&quot;typesList&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:629,&quot;character&quot;:74,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:629,&quot;character&quot;:128,&quot;text&quot;:&quot;_a&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:634,&quot;character&quot;:12,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:634,&quot;character&quot;:21,&quot;text&quot;:&quot;typesList&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:634,&quot;character&quot;:37,&quot;text&quot;:&quot;_fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:635,&quot;character&quot;:19,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:636,&quot;character&quot;:12,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:636,&quot;character&quot;:21,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:637,&quot;character&quot;:26,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:638,&quot;character&quot;:16,&quot;text&quot;:&quot;key&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:638,&quot;character&quot;:22,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:638,&quot;character&quot;:36,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:639,&quot;character&quot;:16,&quot;text&quot;:&quot;value&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:639,&quot;character&quot;:24,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:639,&quot;character&quot;:38,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:639,&quot;character&quot;:43,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:640,&quot;character&quot;:18,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:640,&quot;character&quot;:32,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:640,&quot;character&quot;:37,&quot;text&quot;:&quot;ofType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:640,&quot;character&quot;:44,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:641,&quot;character&quot;:18,&quot;text&quot;:&quot;fields&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:641,&quot;character&quot;:32,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:641,&quot;character&quot;:37,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;quell-server/src/helpers/quellHelpers.js&quot;,&quot;line&quot;:642,&quot;character&quot;:22,&quot;text&quot;:&quot;key&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 22 Jun 2023 00:10:40 GMT</p>
    </body>
  </html>
  